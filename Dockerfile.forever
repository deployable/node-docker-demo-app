FROM node:6.9.5

# `forever` doesn't handle a `sigterm` or `sigint` properly when run in the foreground

RUN set -uex; \
    npm install -g forever; \
    npm cache clean;

WORKDIR /app

ADD package.json /app
RUN set -uex; \
    npm install; \
    npm cache clean;

ADD . /app

USER nobody
EXPOSE 8080
CMD ["forever", "/app/index.js"]

